<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        *{margin: 0;padding: 0;user-select: none;}
        body{
            overflow: hidden;
        }
        .qiu{
            width: 100px;
            height: 100px;
            background-image: url('1.jpg');
            background-size: cover;
            border-radius: 50%;
            border: 1px solid;
            position: absolute;
        }
    </style>
</head>
<body>
    <div class="box">
        <div class="qiu" v-drag></div>
        <div class="qiu" v-drag.range></div>
        <div class="qiu" v-drag.range.fit></div>
    </div>
</body>
<script src="../js/vue.js"></script>
<script>
    Vue.directive('drag',{
        bind(el,binding){
            function yundong(){// 边缘贴合
                if(el.offsetLeft == '0'){
                    el.style.transform = ' translateX(-50px) rotate(90deg)';
                    el.style.transition = '.5s'
                }else if(el.offsetLeft + el.offsetWidth == document.documentElement.clientWidth){
                    el.style.transform = ' translateX(50px) rotate(-90deg)';
                    el.style.transition = '.5s'  
                }
            }
            el.onmousedown = function(ev){
                el.style.transition = '0s'
                var dregx = el.offsetLeft;
                var dregy = el.offsetTop;
                var clix = ev.clientX - dregx;
                var cliy = ev.clientY - dregy;
                document.onmousemove = function(ent){
                    var offx = ent.clientX - clix;
                    var offy = ent.clientY - cliy;

                    if(binding.modifiers.range){
                        offx = offx <= 0 ? 0 : offx;
                        offy = offy <= 0 ? 0 : offy;
                        offx = offx >= window.innerWidth-el.offsetWidth ? window.innerWidth-el.offsetWidth : offx;
                        offy = offy >= window.innerHeight-el.offsetHeight ? window.innerHeight-el.offsetHeight : offy;
                    }

                    el.style.left = offx + 'px';
                    el.style.top = offy + 'px';
                }
            }
            document.onmouseup = function(){
                document.onmousemove = null;
                
                if(binding.modifiers.fit){
                    yundong()
                }
            }
            el.onmouseleave = function(){
                if(binding.modifiers.fit){
                    yundong()
                }
            }
            el.onmouseover = function(){
                el.style.transform = ' translateX(0px) rotate(0deg)';
            }
        }
    })
    new Vue({
        el: '.box',
        data: {

        }
    })
</script>
</html>